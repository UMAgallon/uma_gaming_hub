<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ピエロがいるサバイバル再現MOD | PROJECT: NEON</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* index.htmlからカスタムプロパティと基本スタイルをコピー */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght=400;600;800&display=swap');

        :root {
            --neon-blue: #00FFFF;
            --dark-blue: #151A2C;
            --darker-blue: #0B0E19;
            --shadow-color: rgba(0, 255, 255, 0.7);
            --font-sf: 'Orbitron', sans-serif;
            --font-body: 'Inter', sans-serif;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--darker-blue);
            color: #E0E0E0;
            min-height: 100vh;
            overflow-x: hidden;
            background-image: linear-gradient(to right, var(--dark-blue) 1px, transparent 1px),
                              linear-gradient(to bottom, var(--dark-blue) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        .neon-text {
            color: var(--neon-blue);
            text-shadow: 0 0 5px var(--shadow-color),
                         0 0 10px var(--shadow-color),
                         0 0 20px var(--neon-blue);
            font-family: var(--font-sf);
        }

        .neon-btn {
            background-color: var(--dark-blue);
            border: 2px solid var(--neon-blue);
            box-shadow: 0 0 8px var(--shadow-color);
            transition: all 0.3s ease-in-out;
        }

        .neon-btn:hover {
            background-color: var(--neon-blue);
            color: var(--darker-blue);
            box-shadow: 0 0 15px var(--neon-blue),
                        0 0 30px var(--shadow-color);
            transform: scale(1.05);
        }
        
        .header {
            background-color: rgba(11, 14, 25, 0.95);
            border-bottom: 1px solid var(--dark-blue);
            box-shadow: 0 2px 10px rgba(0, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            z-index: 50;
        }

        .social-link:hover {
            color: var(--neon-blue);
            text-shadow: 0 0 8px var(--shadow-color);
        }

        /* 詳細ページ用のセクションヘッダー */
        .section-header {
            border-left: 5px solid var(--neon-blue);
            padding-left: 1rem;
            margin-bottom: 1.5rem;
            font-family: var(--font-sf);
            font-size: 1.5rem;
            color: #FFF;
            text-shadow: 0 0 5px var(--shadow-color);
        }

        /* コード/手順ブロック */
        .code-block {
            background-color: #0F121C;
            border: 1px solid var(--dark-blue);
            box-shadow: 0 0 5px rgba(0, 255, 255, 0.3);
            font-family: monospace;
            white-space: pre-wrap;
            word-break: break-all;
        }

        /* ギャラリー用のプレースホルダー */
        .gallery-placeholder {
            min-height: 200px;
            background-color: #0E1018;
            border: 2px dashed var(--neon-blue);
            box-shadow: inset 0 0 10px rgba(0, 255, 255, 0.2);
        }
        
        /* メッセージボックスの基本スタイル */
        .message-box {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
    </style>
</head>

<body class="selection:bg-cyan-500 selection:text-black">

    <!-- ヘッダーセクション (index.htmlと同じ) -->
    <header class="header fixed top-0 w-full p-4 flex justify-between items-center">
        <div class="logo text-2xl font-bold tracking-widest">
            <a href="index.html" class="neon-text no-underline">UMA GAMING</a>
        </div>
        <nav class="hidden md:flex space-x-8 text-sm font-semibold">
            <a href="index.html#downloads" class="hover:text-cyan-400 transition duration-300">配布ファイル一覧へ</a>
            <a href="https://www.youtube.com/@UMA_ModCreator" target="_blank" class="hover:text-cyan-400 transition duration-300">チャンネルへ</a>
        </nav>
        <div class="social-links flex space-x-4">
            <!-- X (Twitter) - 簡略化のためにSVGは省略 -->
            <a href="https://x.com/UMA_ModCreator" target="_blank" class="social-link text-xl hover:text-cyan-500">X</a>
            <a href="https://discord.gg/vSFzWh7Zfe" target="_blank" class="social-link text-xl hover:text-cyan-500">D</a>
        </div>
    </header>

    <main class="pt-20 relative z-10 p-4 sm:p-8 lg:p-16">
        <div class="max-w-6xl mx-auto">

            <!-- ページタイトル/製品名 -->
            <section class="mb-12 text-center">
                <p class="text-sm font-sf text-cyan-400 mb-2 tracking-widest">[PROJECT ARTIFACT ID: UMA-001]</p>
                <h1 class="text-5xl md:text-6xl font-extrabold neon-text tracking-wider leading-tight">
                    ピエロがいるサバイバル再現MOD
                </h1>
                <p class="mt-4 text-xl text-gray-400">カラフルピーチさんの企画を完全再現</p>
            </section>

            <!-- 詳細セクション -->
            <section class="bg-black bg-opacity-50 p-6 md:p-10 rounded-xl shadow-2xl border border-cyan-700 space-y-10">

                <!-- 概要とダウンロード -->
                <div class="md:flex md:space-x-10">
                    <div class="md:w-2/3">
                        <h2 class="section-header">DATA OVERVIEW [概要]</h2>
                        <p class="text-gray-300 leading-relaxed mb-6">
                            最大12人でプレイできるミニゲームMOD。
                            人狼×サバイバルのようなコンセプトのゲームで、見ているだけでも楽しめます。
                            カラフルピーチさんの作品を細部まで見様見真似で再現しました！
                        </p>
                        <ul class="space-y-2 text-sm text-cyan-200">
                            <li class="flex items-center"><span class="neon-text mr-3">>></span> バージョン: 1.20.1 (Forge)</li>
                            <li class="flex items-center"><span class="neon-text mr-3">>></span> 主要特徴: 追加ブロック・アイテム、コマンド、構造物、ディメンション</li>
                            <li class="flex items-center"><span class="neon-text mr-3">>></span> ファイルサイズ: 約 1000 KB</li>
                        </ul>
                    </div>
                    
                    <!-- ☆☆☆ 変更箇所 1: ダウンロードボタンを<a>から<button>に変更し、JavaScript関数を呼び出すようにする ☆☆☆ -->
                    <div class="md:w-1/3 mt-8 md:mt-0 flex flex-col justify-center items-center p-4 bg-[#1A2035] rounded-lg border border-cyan-500">
                        <h3 class="text-xl font-sf neon-text mb-4">DOWNLOAD READY</h3>
                        <button 
                            id="downloadButton"
                            onclick="downloadSFPack()" 
                            class="neon-btn text-center w-full py-3 rounded-lg font-bold"
                            aria-live="polite"
                        >
                            <span class="tracking-widest flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 14h-2v-4H9V8h4v4h2v4z"/></svg>
                                DOWNLOAD FILE
                            </span>
                        </button>
                        
                        <!-- ☆☆☆ 変更箇所 2: メッセージボックスのコンテナを追加 ☆☆☆ -->
                        <div id="messageBox" class="message-box mt-3 w-full p-2 text-center text-xs text-gray-400 bg-transparent rounded-lg">
                            準備完了。ボタンを押してください。
                        </div>
                    </div>
                </div>

                <!-- ギャラリー/スクリーンショット -->
                <div>
                    <h2 class="section-header">VISUAL LOGS [スクリーンショット]</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                        <div class="gallery-placeholder rounded-lg p-4 flex items-center justify-center text-gray-500">
                            [Image Placeholder: 夜の都市風景]
                        </div>
                        <div class="gallery-placeholder rounded-lg p-4 flex items-center justify-center text-gray-500">
                            [Image Placeholder: コックピットUI]
                        </div>
                    </div>
                </div>

                <!-- インストール手順 -->
                <div>
                    <h2 class="section-header">INSTALLATION PROTOCOL [導入手順]</h2>
                    <div class="code-block p-4 rounded-lg">
                        <ol class="list-decimal pl-5 text-sm text-gray-200 space-y-2">
                            <li><span class="neon-text"> ダウンロード:</span> 上記のボタンからファイルをダウンロードします。</li>
                            <li><span class="neon-text"> ファイル移動:</span> ダウンロードしたファイルをMinecraftの「mods」フォルダに入れます。</li>
                            <li><span class="neon-text"> ゲーム内適用:</span> Minecraftを起動します。</li>
                            <li><span class="neon-text"> 再起動 (推奨):</span> パフォーマンス向上のためゲームを再起動することを推奨します。</li>
                        </ol>
                    </div>
                </div>

                <!-- 戻るボタン -->
                <div class="pt-6 text-center">
                    <a href="index.html#downloads" class="neon-btn px-6 py-2 text-sm font-bold rounded-lg tracking-widest">
                        << 配布ファイル一覧に戻る [RETURN TO HUB]
                    </a>
                </div>

            </section>
        </div>
    </main>

    <!-- フッター (index.htmlと同じ) -->
    <footer class="footer p-6 text-center text-xs text-gray-600 border-t border-cyan-900 mt-12">
        <p class="tracking-widest font-sf">&copy; 2025 UMA GAMING. ALL RIGHTS RESERVED. [MATRIX ONLINE]</p>
    </footer>

    <!-- ☆☆☆ 変更箇所 3: ダウンロード用JavaScript関数の追加 ☆☆☆ -->
    <script>
        // ファイルの保存場所を定義
        const FOLDER_PATH = './file/'; 
        // 実際のファイル名を定義 (仮のファイル名)
        const DOWNLOAD_FILENAME = 'clown_survival.jar'; 
        
        const messageBox = document.getElementById('messageBox');
        const downloadButton = document.getElementById('downloadButton');

        /**
         * メッセージボックスに結果を表示する
         * @param {string} message - 表示するメッセージ
         * @param {'success'|'error'|'info'|'loading'} type - メッセージの種類
         */
        function showMessage(message, type) {
            let bgColor = 'bg-transparent';
            let borderColor = 'border-transparent';
            let textColor = 'text-gray-400';
            let opacity = 'opacity-100';

            switch (type) {
                case 'success':
                    textColor = 'text-green-400';
                    break;
                case 'error':
                    textColor = 'text-red-400';
                    break;
                case 'loading':
                    textColor = 'text-yellow-400';
                    message = `<span class="animate-pulse">${message}</span>`;
                    break;
                case 'info':
                default:
                    textColor = 'text-cyan-400';
                    break;
            }
            
            messageBox.className = `message-box mt-3 w-full p-2 text-center text-xs ${textColor} ${bgColor} rounded-lg ${opacity}`;
            messageBox.innerHTML = message;
        }


        /**
         * 指定されたファイル名とパスでダウンロードを実行する
         * (以前のやり取りで提供された構文をベースにしています)
         */
        async function downloadFile(fileName) {
            const fullPath = FOLDER_PATH + fileName;
            
            // ロード中表示
            downloadButton.disabled = true;
            downloadButton.classList.add('opacity-50', 'cursor-not-allowed');
            showMessage(`[STATUS: PULLING DATA] ${fileName} の取得を開始...`, 'loading');

            try {
                // 1. ファイルを取得 (fetch)
                const response = await fetch(fullPath);

                if (!response.ok) {
                    if (response.status === 404) {
                        throw new Error(`ファイルが見つかりません。パスを確認: ${fullPath}`);
                    }
                    throw new Error(`ダウンロードエラー: HTTP ${response.status} ${response.statusText}`);
                }

                // 2. レスポンスからBlob (バイナリデータ) を取得
                const blob = await response.blob();

                // 3. ダウンロードリンク (a要素) を作成してクリック
                const downloadUrl = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                
                a.href = downloadUrl;
                a.download = fileName; 

                // 4. ダウンロードを実行
                document.body.appendChild(a);
                a.click(); 
                document.body.removeChild(a);
                window.URL.revokeObjectURL(downloadUrl);

                showMessage(`[STATUS: DOWNLOAD COMPLETE] ${fileName} のダウンロードが完了しました。`, 'success');

            } catch (error) {
                console.error('ダウンロードエラー:', error);
                showMessage(`[STATUS: ERROR] ダウンロードに失敗しました: ${error.message}`, 'error');
            } finally {
                // 完了/失敗に関わらずボタンを元に戻す
                downloadButton.disabled = false;
                downloadButton.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        /**
         * SFテクスチャパックのダウンロード処理を呼び出す
         */
        function downloadSFPack() {
            downloadFile(DOWNLOAD_FILENAME);
        }

        // 初期メッセージを設定
        window.onload = function() {
            showMessage('準備完了。ボタンを押してください。', 'info');
        }

    </script>
</body>
</html>
